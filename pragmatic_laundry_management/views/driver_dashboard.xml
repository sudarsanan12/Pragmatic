<odoo>
    <data>
        <record model="ir.ui.view" id="stock_picking_kanban_driver">
            <field name="name">stock.picking.kanban</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile" sample="1" create="0">
                    <field name='id'/>
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="location_dest_id"/>
                    <field name="state"/>
                    <field name="scheduled_date"/>
                    <field name="activity_state"/>
                    <progressbar field="activity_state"
                                 colors='{"planned": "success", "today": "warning", "overdue": "danger"}'/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_top mb8">
                                    <field name="priority" widget="priority"/>
                                    <div class="o_kanban_record_headings ms-1">
                                        <strong class="o_kanban_record_title">
                                            <span>
                                                <t t-esc="record.name.value"/>
                                            </span>
                                        </strong>
                                    </div>
                                    <strong>
                                        <field name="state" widget="label_selection"
                                               options="{'classes': {'draft': 'default', 'cancel': 'danger', 'waiting': 'warning', 'confirmed': 'warning', 'done': 'success'}}"/>
                                    </strong>
                                </div>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <t t-esc="record.partner_id.value"/>
                                        <field name="activity_ids" widget="kanban_activity"/>
                                        <field name="json_popover" nolabel="1" widget="stock_rescheduling_popover"
                                               attrs="{'invisible': [('json_popover', '=', False)]}"/>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <t t-esc="record.scheduled_date.value and record.scheduled_date.value.split(' ')[0] or False"/>
                                        <field name="user_id" widget="many2one_avatar_user"
                                               attrs="{'invisible': [('user_id', '=', False)]}"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="transfer_new_inherit" model="ir.ui.view">
            <field name="name">Transfer</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='picking_type_id']" position="after">
                    <field name="laundry_order_id"/>
                    <field name="driver_id" attrs="{'invisible':  [('picking_type_code', '!=', 'incoming')]}"/>
                    <field name="delivery_driver_id" attrs="{'invisible': [('picking_type_code', '!=', 'outgoing')]}"/>
                </xpath>
                <xpath expr="//h1[hasclass('d-flex')]" position="before">
                    <div attrs="{'invisible':  [('picking_type_code', '!=', 'incoming')]}">
                        <h3>INCOMING</h3>
                    </div>
                    <div attrs="{'invisible': [('picking_type_code', '!=', 'outgoing')]}">
                        <h3>OUTGOING</h3>
                    </div>
                </xpath>
                <xpath expr="//button[@name='action_assign']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
            </record>

        <record id="driver_inherit" model="ir.ui.view">
            <field name="name">Driver</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <button name="action_reached_store" string="REACHED STORE" type="object" class="btn btn-primary" attrs="{'invisible':  ['|',('is_picked','!=', True),('picking_type_code', '!=', 'incoming')]}"/>
                </xpath>
                <xpath expr="//field[@name='laundry_order_id']" position="after">
                    <field name="is_picked" invisible="1"/>
                </xpath>
            </field>
        </record>


        <record id="action_driver_dash" model="ir.actions.act_window">
            <field name="name">Driver dashboard</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">kanban,form</field>
            <field name="domain">[('state', '!=', 'done')]</field>
            <field name="view_id" ref="pragmatic_laundry_management.stock_picking_kanban_driver"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new
                </p>
            </field>
        </record>
        <record id="trasfer_incoming_action_driver" model="ir.actions.act_window">
            <field name="name">Transfer Incoming</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('picking_type_id.code', '=', 'incoming'),('state', '=', 'assigned')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Create a new
                </p>
            </field>
        </record>

        <record id="trasfer_outgoing_action_driver" model="ir.actions.act_window">
            <field name="name">Transfer Outgoing</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('picking_type_id.code', '=', 'outgoing'),('state', '=', 'assigned')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Create a new
                </p>
            </field>
        </record>
        <record id="vpicktree_driver_orders" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <tree string="Picking list" multi_edit="1" sample="1" create="0">
                    <header>
                        <button name="do_unreserve" type="object" string="Unreserve"/>
                        <button name="action_assign" type="object" string="Check Availability"/>
                    </header>
                    <field name="company_id" invisible="1"/>
                    <field name="priority" optional="show" widget="priority" nolabel="1"/>
                    <field name="name" decoration-bf="1"/>
                    <field name="location_id" options="{'no_create': True}" string="From"
                           groups="stock.group_stock_multi_locations" optional="show"/>
                    <field name="location_dest_id" options="{'no_create': True}" string="To"
                           groups="stock.group_stock_multi_locations" optional="show"/>
                    <field name="partner_id" optional="show"/>
                    <field name="is_signed" string="Signed" optional="hide" groups="stock.group_stock_sign_delivery"/>
                    <field name="user_id" optional="hide" widget="many2one_avatar_user"/>
                    <field name="scheduled_date" optional="show" widget="remaining_days"
                           attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                    <field name="picking_type_code" invisible="1"/>
                    <field name="products_availability_state" invisible="1" options='{"lazy": true}'/>
                    <field name="products_availability" options='{"lazy": true}'
                           optional="hide"
                           attrs="{'invisible': ['|', ('picking_type_code', '!=', 'outgoing'), ('state', 'not in', ['confirmed', 'waiting', 'assigned'])]}"
                           decoration-success="state == 'assigned' or products_availability_state == 'available'"
                           decoration-warning="state != 'assigned' and products_availability_state in ('expected', 'available')"
                           decoration-danger="state != 'assigned' and products_availability_state == 'late'"/>
                    <field name="date_deadline" optional="hide" widget="remaining_days"
                           attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                    <field name="date_done" string="Effective Date" optional="hide"/>
                    <field name="origin" optional="show"/>
                    <field name="backorder_id" optional="hide"/>
                    <field name="picking_type_id" optional="hide"/>
                    <field name="company_id" groups="base.group_multi_company" optional="show"/>
                    <field name="state" optional="show" widget="badge"
                           decoration-danger="state=='cancel'"
                           decoration-info="state== 'assigned'"
                           decoration-muted="state == 'draft'"
                           decoration-success="state == 'done'"
                           decoration-warning="state not in ('draft','cancel','done','assigned')"/>
                    <field name="activity_exception_decoration" widget="activity_exception"/>
                    <field name="json_popover" widget="stock_rescheduling_popover" nolabel="1"
                           attrs="{'invisible': [('json_popover', '=', False)]}"/>
                </tree>
            </field>
        </record>
        <record id="action_driver_all_orders" model="ir.actions.act_window">
            <field name="name">All Order</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pragmatic_laundry_management.vpicktree_driver_orders"/>

            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new
                </p>
            </field>
        </record>

        <record id="vpicktree_driver" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <tree string="Picking list" multi_edit="1" sample="1" create="0">
                    <header>
                        <button name="do_unreserve" type="object" string="Unreserve"/>
                        <button name="action_assign" type="object" string="Check Availability"/>
                    </header>
                    <field name="company_id" invisible="1"/>
                    <field name="priority" optional="show" widget="priority" nolabel="1"/>
                    <field name="name" decoration-bf="1"/>
                    <field name="location_id" options="{'no_create': True}" string="From"
                           groups="stock.group_stock_multi_locations" optional="show"/>
                    <field name="location_dest_id" options="{'no_create': True}" string="To"
                           groups="stock.group_stock_multi_locations" optional="show"/>
                    <field name="partner_id" optional="show"/>
                    <field name="is_signed" string="Signed" optional="hide" groups="stock.group_stock_sign_delivery"/>
                    <field name="user_id" optional="hide" widget="many2one_avatar_user"/>
                    <field name="scheduled_date" optional="show" widget="remaining_days"
                           attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                    <field name="picking_type_code" invisible="1"/>
                    <field name="products_availability_state" invisible="1" options='{"lazy": true}'/>
                    <field name="products_availability" options='{"lazy": true}'
                           optional="hide"
                           attrs="{'invisible': ['|', ('picking_type_code', '!=', 'outgoing'), ('state', 'not in', ['confirmed', 'waiting', 'assigned'])]}"
                           decoration-success="state == 'assigned' or products_availability_state == 'available'"
                           decoration-warning="state != 'assigned' and products_availability_state in ('expected', 'available')"
                           decoration-danger="state != 'assigned' and products_availability_state == 'late'"/>
                    <field name="date_deadline" optional="hide" widget="remaining_days"
                           attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                    <field name="date_done" string="Effective Date" optional="hide"/>
                    <field name="origin" optional="show"/>
                    <field name="backorder_id" optional="hide"/>
                    <field name="picking_type_id" optional="hide"/>
                    <field name="company_id" groups="base.group_multi_company" optional="show"/>
                    <field name="state" optional="show" widget="badge"
                           decoration-danger="state=='cancel'"
                           decoration-info="state== 'assigned'"
                           decoration-muted="state == 'draft'"
                           decoration-success="state == 'done'"
                           decoration-warning="state not in ('draft','cancel','done','assigned')"/>
                    <field name="activity_exception_decoration" widget="activity_exception"/>
                    <field name="json_popover" widget="stock_rescheduling_popover" nolabel="1"
                           attrs="{'invisible': [('json_popover', '=', False)]}"/>
                </tree>
            </field>
        </record>

        <record id="action_driver_order_history" model="ir.actions.act_window">
            <field name="name">Order History</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pragmatic_laundry_management.vpicktree_driver"/>
            <field name="domain">[('state', '=', 'done')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new
                </p>
            </field>
        </record>
           
        <record id="trasfer_incoming_action" model="ir.actions.act_window">
            <field name="name">Transfer Incoming</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('picking_type_id.code', '=', 'incoming')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Create a new
                </p>
            </field>
        </record>

        <record id="trasfer_outgoing_action" model="ir.actions.act_window">
            <field name="name">Transfer Outgoing</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('picking_type_id.code', '=', 'outgoing')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Create a new
                </p>
            </field>
        </record>

    </data>
</odoo>